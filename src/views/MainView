import React, { useState } from "react";
import OpenDesignView from "./OpenDesignView";
import SidebarView from "./Components/SidebarView";
import OpenDesignController from "../controllers/OpenDesignController";

const openDesignController = new OpenDesignController();

const MainView = () => {
  const initialNodes = openDesignController.getNodes();
  const [nodes, setNodes] = useState(initialNodes);

  const handleAddNode = (item) => {
    const newNode = openDesignController.addNewNode(item);
    setNodes((nds) => [...nds, newNode]);
  };

  return (
    <div>
      <SidebarView onAddNode={handleAddNode} />
      <OpenDesignView nodes={nodes} setNodes={setNodes} />
    </div>
  );
};

export default MainView;